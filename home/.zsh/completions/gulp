function $$gulp_completion() {
    compls=$(grep -Eho "gulp\.task[^,]*" gulpfile.* 2>/dev/null | sed s/\"/\'/g | cut -d "'" -f 2 | sort)

    completions=(${=compls})
    compadd -- $completions
}

compdef $$gulp_completion gulp

# vim:ft=sh
