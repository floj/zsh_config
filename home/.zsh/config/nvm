# async init of nvm
(( NVM_INIT_DONE )) && return

async_start_worker nvm_worker -n

# Create a callback function to process results
nvm_init_completed_callback() {
  NVM_INIT_DONE=1
}

# Register callback function for the workers completed jobs
async_register_callback nvm_worker nvm_init_completed_callback

# Give the worker some tasks to perform
async_job nvm_worker export NVM_DIR="$HOME/.nvm" && source "/usr/local/opt/nvm/nvm.sh"
